(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const d=document.querySelector("button"),g=document.querySelector("[type=submit]"),h=document.querySelector("form"),a=document.querySelector("[type=search]"),i=document.querySelector("datalist"),u=document.querySelector("div"),p=document.querySelector("span"),s=new Worker(new URL("/assets/worker-cb37bfb8.js",self.location),{type:"module"});s.addEventListener("message",async e=>{if(e.data.ready){localStorage.setItem("sqlite-file-name",e.data.ready),h.disabled=!1,d.hidden=!0;const t=new URL(location.href);t.pathname.length>1?m(t):(p.style.display="inline-block",s.postMessage({searchRandom:!0}))}else if(e.data.showOpenFilePicker)await f();else if(e.data.titleSearch){const t=i.querySelectorAll("option");for(const l of t)if(l.value===e.data.titleSearch)return;const r=document.createElement("option");r.textContent=e.data.titleSearch,r.value=e.data.titleSearch,i.append(r)}else if(e.data.html){a.value="",i.innerHTML="",p.style.display="none",window.scrollTo(0,0),u.innerHTML=`<h2>${e.data.title}</h2>${e.data.html}`;const t=encodeURIComponent(e.data.title.toLowerCase().replaceAll(/\s/g,"_"));history.pushState(null,"",t)}else e.data.error&&(u.innerHTML=`<pre>${e.data.error}</pre>`)});const f=async()=>{try{const[e]=await showOpenFilePicker({types:[{description:"SQLite files",accept:{"application/vnd.sqlite3":[".sqlite",".sqlite3",".db",".db3",".s3db",".sl3"],"application/x-sqlite3":[".sqlite",".sqlite3",".db",".db3",".s3db",".sl3"]}}]});s.postMessage({handle:e})}catch(e){if(e.name==="SecurityError")d.hidden=!1,d.addEventListener("click",async()=>{await f()});else if(e.name==="AbortError")return;console.error(e.name,e.message)}};h.addEventListener("submit",async e=>{e.preventDefault();let t=a.value.trim();if(t){const r=new URL(location.href);r.pathname=t.replaceAll(/\s+/g,"_"),m(r)}});a.addEventListener("input",async()=>{p.style.display="none";let e=a.value.trim();const t=i.querySelectorAll("option");for(const r of t)if(console.log(e,r.value),e===r.value)return g.click();if(e.length>3)return s.postMessage({query:e});i.innerHTML=""});const m=e=>{const t=decodeURIComponent(e.pathname.slice(1).replaceAll(/_/g," "));s.postMessage({search:t})};u.addEventListener("click",e=>{const t=e.target.closest("a");if(t){const r=new URL(t.href);r.origin===location.origin&&(e.preventDefault(),m(r))}});const y=localStorage.getItem("sqlite-file-name");y?s.postMessage({checkIfFileExists:y}):await f();
