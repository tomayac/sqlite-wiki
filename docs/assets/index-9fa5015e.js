(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const i=document.querySelector("button"),l=document.querySelector("div"),c=new Worker(new URL("/assets/worker-cff1ef84.js",self.location),{type:"module"}),d=async()=>{try{const[e]=await showOpenFilePicker({types:[{description:"SQLite files",accept:{"application/vnd.sqlite3":[".sqlite",".sqlite3",".db",".db3",".s3db",".sl3"],"application/x-sqlite3":[".sqlite",".sqlite3",".db",".db3",".s3db",".sl3"]}}]});c.postMessage({handle:e})}catch(e){if(e.name==="SecurityError")i.hidden=!1,i.addEventListener("click",async()=>{await d()});else if(e.name==="AbortError")return;console.error(e.name,e.message)}};c.addEventListener("message",async e=>{if(e.data.ready){i.hidden=!0;const r=new URL(location.href);r.pathname&&u(r)}else e.data.showOpenFilePicker?await d():e.data.html&&(window.scrollTo(0,0),l.innerHTML=`<h1>${e.data.query}</h1>${e.data.html}`,history.pushState(null,"",e.data.slug))});const u=e=>{const r=e.pathname.slice(1),o=decodeURIComponent(e.pathname.slice(1).replaceAll(/_/g," "));c.postMessage({search:o,slug:r})};l.addEventListener("click",e=>{const r=e.target.closest("a");if(r){const o=new URL(r.href);o.origin===location.origin&&(e.preventDefault(),u(o))}});
